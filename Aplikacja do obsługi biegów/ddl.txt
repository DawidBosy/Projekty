-- Generated by Oracle SQL Developer Data Modeler 21.2.0.165.1515
--   at:        2021-12-12 16:49:21 CET
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE bieg (
    id_biegu                 INTEGER NOT NULL,
    dystans                  INTEGER NOT NULL,
    rodzaj                   VARCHAR2(20) NOT NULL,
    data_biegu               DATE NOT NULL,
    wydarzenie_id_wydarzenia INTEGER NOT NULL
);

ALTER TABLE bieg ADD CONSTRAINT bieg_pk PRIMARY KEY ( id_biegu,
                                                      wydarzenie_id_wydarzenia );

CREATE TABLE firma (
    id_firmy        INTEGER NOT NULL,
    nazwa           VARCHAR2(30) NOT NULL,
    adres           VARCHAR2(50) NOT NULL,
    email           VARCHAR2(30) NOT NULL,
    nr_telefonu     VARCHAR2(9) NOT NULL,
    pracownik_pesel VARCHAR2(11) NOT NULL
);

CREATE UNIQUE INDEX firma__idx ON
    firma (
        pracownik_pesel
    ASC );

ALTER TABLE firma ADD CONSTRAINT firma_pk PRIMARY KEY ( id_firmy );

CREATE TABLE kategoria (
    id_kategoria INTEGER NOT NULL,
    wiek_min     INTEGER NOT NULL,
    wiek_max     INTEGER NOT NULL
);

ALTER TABLE kategoria ADD CONSTRAINT kategoria_pk PRIMARY KEY ( id_kategoria );

CREATE TABLE klub (
    id_klubu       INTEGER NOT NULL,
    nazwa          VARCHAR2(30) NOT NULL,
    zalozyciel     VARCHAR2(30) NOT NULL,
    data_powstania DATE NOT NULL,
    miejscowosc    VARCHAR2(30) NOT NULL
);

ALTER TABLE klub ADD CONSTRAINT klub_pk PRIMARY KEY ( id_klubu );

CREATE TABLE osoba (
    pesel          VARCHAR2(11) NOT NULL,
    imie           VARCHAR2(20) NOT NULL,
    nazwisko       VARCHAR2(20) NOT NULL,
    plec           VARCHAR2(20) NOT NULL,
    data_urodzenia DATE NOT NULL,
    nr_telefonu    VARCHAR2(9) NOT NULL,
    adres          VARCHAR2(50) NOT NULL,
    miejscowosc    VARCHAR2(30) NOT NULL
);

ALTER TABLE osoba ADD CONSTRAINT osoba_pk PRIMARY KEY ( pesel );

CREATE TABLE pracownik (
    pesel          VARCHAR2(11) NOT NULL,
    firma_id_firmy INTEGER
);

ALTER TABLE pracownik ADD CONSTRAINT pracownik_pk PRIMARY KEY ( pesel );

CREATE TABLE sponsoring (
    kwota                    NUMBER(8, 2) NOT NULL,
    wydarzenie_id_wydarzenia INTEGER NOT NULL,
    firma_id_firmy           INTEGER NOT NULL
);

ALTER TABLE sponsoring ADD CONSTRAINT sponsoring_pk PRIMARY KEY ( firma_id_firmy,
                                                                  wydarzenie_id_wydarzenia );

CREATE TABLE uczestnictwo (
    czas               DATE NOT NULL,
    zajete_miejsce     INTEGER NOT NULL,
    zawodnik_pesel     VARCHAR2(11) NOT NULL,
    bieg_id_biegu      INTEGER NOT NULL,
    bieg_id_wydarzenia INTEGER NOT NULL
);

ALTER TABLE uczestnictwo
    ADD CONSTRAINT uczestnictwo_pk PRIMARY KEY ( zawodnik_pesel,
                                                 bieg_id_biegu,
                                                 bieg_id_wydarzenia );

CREATE TABLE wydarzenie (
    id_wydarzenia   INTEGER NOT NULL,
    nazwa           VARCHAR2(30) NOT NULL,
    organizator     VARCHAR2(30) NOT NULL,
    data_wydarzenia DATE NOT NULL
);

ALTER TABLE wydarzenie ADD CONSTRAINT wydarzenie_pk PRIMARY KEY ( id_wydarzenia );

CREATE TABLE zawodnik (
    pesel                  VARCHAR2(11) NOT NULL,
    wzrost                 INTEGER NOT NULL,
    waga                   INTEGER NOT NULL,
    klub_id_klubu          INTEGER,
    kategoria_id_kategoria INTEGER
);

ALTER TABLE zawodnik ADD CONSTRAINT zawodnik_pk PRIMARY KEY ( pesel );

ALTER TABLE bieg
    ADD CONSTRAINT bieg_wydarzenie_fk FOREIGN KEY ( wydarzenie_id_wydarzenia )
        REFERENCES wydarzenie ( id_wydarzenia );

ALTER TABLE firma
    ADD CONSTRAINT firma_pracownik_fk FOREIGN KEY ( pracownik_pesel )
        REFERENCES pracownik ( pesel );

ALTER TABLE pracownik
    ADD CONSTRAINT pracownik_firma_fk FOREIGN KEY ( firma_id_firmy )
        REFERENCES firma ( id_firmy );

ALTER TABLE pracownik
    ADD CONSTRAINT pracownik_osoba_fk FOREIGN KEY ( pesel )
        REFERENCES osoba ( pesel );

ALTER TABLE sponsoring
    ADD CONSTRAINT sponsoring_firma_fk FOREIGN KEY ( firma_id_firmy )
        REFERENCES firma ( id_firmy );

ALTER TABLE sponsoring
    ADD CONSTRAINT sponsoring_wydarzenie_fk FOREIGN KEY ( wydarzenie_id_wydarzenia )
        REFERENCES wydarzenie ( id_wydarzenia );

ALTER TABLE uczestnictwo
    ADD CONSTRAINT uczestnictwo_bieg_fk FOREIGN KEY ( bieg_id_biegu,
                                                      bieg_id_wydarzenia )
        REFERENCES bieg ( id_biegu,
                          wydarzenie_id_wydarzenia );

ALTER TABLE uczestnictwo
    ADD CONSTRAINT uczestnictwo_zawodnik_fk FOREIGN KEY ( zawodnik_pesel )
        REFERENCES zawodnik ( pesel );

ALTER TABLE zawodnik
    ADD CONSTRAINT zawodnik_kategoria_fk FOREIGN KEY ( kategoria_id_kategoria )
        REFERENCES kategoria ( id_kategoria );

ALTER TABLE zawodnik
    ADD CONSTRAINT zawodnik_klub_fk FOREIGN KEY ( klub_id_klubu )
        REFERENCES klub ( id_klubu );

ALTER TABLE zawodnik
    ADD CONSTRAINT zawodnik_osoba_fk FOREIGN KEY ( pesel )
        REFERENCES osoba ( pesel );

--  ERROR: No Discriminator Column found in Arc FKArc_1 - constraint trigger for Arc cannot be generated 

--  ERROR: No Discriminator Column found in Arc FKArc_1 - constraint trigger for Arc cannot be generated



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            10
-- CREATE INDEX                             1
-- ALTER TABLE                             21
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   2
-- WARNINGS                                 0
